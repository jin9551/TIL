SAML(Security Assertion Markup Language)은 **기업 환경에서 Single Sign-On(SSO)** 을 구현할 때 자주 사용되는 **XML 기반의 인증/인가 표준**입니다. 사용자 인증 정보를 하나의 시스템에서 처리하고, 다른 시스템에 이를 안전하게 전달할 수 있도록 설계되었습니다.

---

## 🔑 핵심 개념 요약

| 용어                          | 설명                                                |
| --------------------------- | ------------------------------------------------- |
| **SAML**                    | XML 기반 인증/인가 데이터 교환 표준                            |
| **SSO (Single Sign-On)**    | 한 번 로그인으로 여러 서비스에 접근 가능                           |
| **IdP (Identity Provider)** | 사용자를 인증하는 주체 (ex. ADFS, Okta, Google Workspace 등) |
| **SP (Service Provider)**   | 인증된 사용자에게 서비스를 제공하는 웹 애플리케이션                      |
| **Assertion**               | 인증된 사용자 정보(속성)를 담은 SAML 메시지                       |

---

## 🔄 동작 흐름 (SAML SSO)

1. **사용자가 SP 접근 시도**

   * 사용자가 SP(서비스 제공자) 웹사이트에 접근
   * SP는 사용자가 인증되지 않았음을 감지하고 IdP로 리디렉션

2. **사용자가 IdP에 로그인**

   * 사용자는 IdP(예: 회사의 인증 시스템)에 로그인

3. **IdP가 SAML Assertion 생성**

   * 로그인 성공 시, IdP는 사용자 정보(이메일, 권한 등)를 담은 SAML Assertion을 생성하여 사용자에게 전달

4. **사용자가 Assertion을 SP로 전달**

   * 브라우저는 이 Assertion을 다시 SP로 전달

5. **SP는 Assertion 검증 및 로그인 처리**

   * SP는 Assertion을 검증하고, 사용자 세션을 생성해 로그인 처리 완료

---

## 🔐 SAML의 특징

| 항목         | 설명                                          |
| ---------- | ------------------------------------------- |
| **보안**     | Assertion은 대개 **서명**되어 위/변조 방지. HTTPS 통해 전달 |
| **표준화**    | OASIS 표준이며 다양한 플랫폼/언어에서 지원됨                 |
| **확장성**    | 속성(attribute)을 통해 다양한 사용자 정보 전달 가능          |
| **SSO 지원** | 여러 SP에서 한 번의 로그인으로 접근 가능                    |

---

## 📦 실제 사용 예시

* 회사 인트라넷 포털에 로그인 → Salesforce, Workday, Slack 등 자동 로그인
* 클라우드 서비스(GCP, AWS)에서도 SAML IdP를 이용한 SSO 제공

---

## ⚠️ 단점 및 고려사항

| 항목               | 설명                                     |
| ---------------- | -------------------------------------- |
| **복잡성**          | 설정이 까다롭고 디버깅이 어려움 (특히 XML 서명/시간 유효성 등) |
| **브라우저 의존적 플로우** | 기본적으로 리디렉션 기반 (SPA에선 불편할 수 있음)         |
| **OAuth보다 무겁다**  | 최근엔 웹/모바일에서는 OAuth 2.0/OIDC가 더 자주 사용됨  |

---

## 🆚 SAML vs OAuth vs OIDC

| 항목    | SAML           | OAuth2    | OIDC        |
| ----- | -------------- | --------- | ----------- |
| 표준 방식 | XML            | JSON      | JSON        |
| 주 용도  | Enterprise SSO | API 권한 위임 | 인증 + 권한 위임  |
| 대상    | 브라우저 기반 앱      | 웹/모바일/서버  | 사용자 인증 포함 앱 |
| 복잡도   | 높음             | 중간        | 중간          |

---

