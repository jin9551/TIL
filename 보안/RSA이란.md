# RSA이란?

좋습니다. 그러면 JWT나 JWKS 같은 웹 인증 이야기 빼고,
**순수하게 RSA 암호화 기법** 자체만 설명드리겠습니다.

---

## 1. RSA란?

* **비대칭키(public key, private key) 암호화 알고리즘**의 대표격.
* 1977년 Ron **R**ivest, Adi **S**hamir, Leonard **A**dleman이 고안 → 이름 첫 글자를 따서 **RSA**.
* 수학적으로 **큰 소수 곱의 소인수분해 난이도**에 기반.

---

## 2. 핵심 아이디어

RSA는 두 개의 키를 사용합니다.

| 키 종류                  | 용도                     |
| --------------------- | ---------------------- |
| **공개키 (Public Key)**  | 모두에게 공개, 암호화·서명 검증에 사용 |
| **개인키 (Private Key)** | 소유자만 보관, 복호화·서명 생성에 사용 |

* **공개키로 암호화 → 개인키로 복호화**
* **개인키로 서명 → 공개키로 서명 검증**

---

## 3. 키 생성 원리

1. **두 개의 큰 소수** $p, q$ 선택 (예: 1024비트 이상의 소수)
2. **모듈러스** $n = p \times q$ 계산
   → n은 공개키·개인키 모두에서 사용
3. **오일러 피함수** 계산:
   $\varphi(n) = (p-1)(q-1)$
4. **공개 지수** $e$ 선택
   → 보통 65537 사용 (빠르고 안전)
5. **개인 지수** $d$ 계산:
   $e \times d \equiv 1 \ (\text{mod} \ \varphi(n))$

결과:

* 공개키: $(n, e)$
* 개인키: $(n, d)$

---

## 4. 암호화 & 복호화

* **암호화** (메시지 $m$ → 암호문 $c$):

  $$
  c = m^e \mod n
  $$
* **복호화** (암호문 $c$ → 원문 $m$):

  $$
  m = c^d \mod n
  $$

---

## 5. 전자서명 & 검증

* **서명**:

  $$
  s = H(m)^d \mod n
  $$

  (H는 해시 함수, 변조 방지)
* **검증**:

  $$
  H(m) \stackrel{?}{=} s^e \mod n
  $$

---

## 6. 특징

* **장점**:

  * 키 분배 문제 해결 (공개키는 누구나 받을 수 있음)
  * 서명 기능과 암호화 기능을 모두 지원
* **단점**:

  * 대칭키 암호보다 훨씬 느림
  * 큰 수 연산 → CPU 부하
  * 대량 데이터 암호화에는 부적합 (보통 하이브리드 방식 사용)

---

## 7. 안전하게 쓰는 방법

* 패딩 필수: **OAEP**(암호화), **PSS**(서명)
* 키 길이: 2048비트 이상 (권장 3072+)
* 정기적인 키 교체(롤오버)
* 대용량 데이터 → RSA로 대칭키 암호화 후 AES 등으로 본문 처리

---

## 8. 간단 예시 (개념 흐름)

```
[키 생성]
   n, e  → 공개키
   n, d  → 개인키

[암호화]
   메시지 m
   c = m^e mod n  → 암호문 c

[복호화]
   m = c^d mod n  → 원문 m 복원
```

